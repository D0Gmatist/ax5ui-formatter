"use strict";!function(e,t){var n=ax5.util,a=function(e,t){if("undefined"==typeof t&&(t=e.value.length),e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}else e.selectionStart&&(e.focus(),e.selectionStart=t,e.selectionEnd=t)},r=function(){var e;t&&t.call(this),this.queue=[],this.config={animateTime:250},this.openTimer=null,this.closeTimer=null,e=this.config,this.init=function(){},this.bind=function(t){var a={};return jQuery.extend(!0,a,e),t&&jQuery.extend(!0,a,t),t=a,t.target?(t.$target=jQuery(t.target),t.id||(t.id="ax5-formatter-"+ax5.getGuid()),-1===n.search(this.queue,function(){return this.id==t.id})&&(this.queue.push(t),this.__bindFormatterTarget(t,this.queue.length-1)),this):(console.log(ax5.info.getError("ax5formatter","401","bind")),this)},this.__bindFormatterTarget=function(){var e={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},t={48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1},r={money:function(n,a){var r={188:","};"int"==n.patternArgument||(r[190]="."),r=$.extend(r,e),n.enterableKeyCodes=$.extend(r,t)},number:function(n,a){var r={190:"."};r=$.extend(r,e),n.enterableKeyCodes=$.extend(r,t)},date:function(n,a){var r={189:"-",191:"/"};r=$.extend(r,e),n.enterableKeyCodes=$.extend(r,t)},time:function(n,a){var r={186:":"};r=$.extend(r,e),n.enterableKeyCodes=$.extend(r,t)},bizno:function(n,a){var r={189:"-"};r=$.extend(r,e),n.enterableKeyCodes=$.extend(r,t)},phone:function(n,a){var r={189:"-",188:","};r=$.extend(r,e),n.enterableKeyCodes=$.extend(r,t)},custom:function(n,a){var r={};r=$.extend(r,e),n.enterableKeyCodes=$.extend(r,t)}},i=function(e){return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1},o={money:function(e,t,a,r){var i,r=r.replace(/[^0-9^\.^\-]/g,""),o=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),u=r.split(".");u[0]+=".";do u[0]=u[0].replace(o,"$1,$2");while(o.test(u[0]));return i=u.length>1?n.isNumber(e.maxRound)?u[0]+n.left(u[1],e.maxRound):u.join(""):u[0].split(".")[0]},number:function(e,t){var a,r=r.replace(/[^0-9^\.^\-]/g,""),i=r.split(".");return a=i.length>1?n.isNumber(e.maxRound)?i[0]+n.left(i[1],e.maxRound):i.join(""):i[0].split(".")[0]},date:function(e,t){},time:function(e,t){},bizno:function(e,t){},phone:function(e,t){},custom:function(e,t){}},u={keydown:function(e,t,n){var a=!1;n.which&&e.enterableKeyCodes[n.which]||(a=!0),a&&i(n)},keyup:function(e,t,n){var r,i,u,c,s=e.$input.get(0);"selectionStart"in s?r=s.selectionStart:document.selection&&(u=document.selection.createRange(),c=document.selection.createRange().text.length,u.moveStart("character",-s.value.length),r=u.text.length-c),i=s.value,o[e.pattern]&&(s.value=o[e.pattern].call(this,e,t,n,s.value),a(s,r+s.value.length-i.length))}};return function(e,t){if(!e.pattern&&("INPUT"==e.$target.get(0).tagName?e.pattern=e.$target.attr("data-ax5formatter"):e.pattern=e.$target.find('input[type="text"]').attr("data-ax5formatter"),!e.pattern))return console.log(ax5.info.getError("ax5formatter","501","bind")),console.log(e.target),this;var n=/[^\(^\))]+/gi,a=e.pattern.match(n);e.pattern=a[0],e.patternArgument=a[1]||"";for(var i in r)if(e.pattern==i){r[i].call(this,e,t);break}return e.$input="INPUT"==e.$target.get(0).tagName?e.$target:e.$target.find('input[type="text"]'),e.$input.unbind("keydown.ax5formatter").bind("keydown.ax5formatter",u.keydown.bind(this,this.queue[t],t)),e.$input.unbind("keyup.ax5formatter").bind("keyup.ax5formatter",u.keyup.bind(this,this.queue[t],t)),this}}(),this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};e.formatter=function(){return n.isFunction(t)&&(r.prototype=new t),r}()}(ax5.ui,ax5.ui.root),ax5.ui.formatter_instance=new ax5.ui.formatter,$.fn.ax5formatter=function(){return function(e){return"undefined"==typeof e&&(e={}),$.each(this,function(){var t={target:this};e=$.extend(!0,t,e),ax5.ui.formatter_instance.bind(e)}),this}}();