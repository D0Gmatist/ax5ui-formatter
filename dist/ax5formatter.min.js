"use strict";!function(e,t){var n=ax5.util,r=function(e,t){if("undefined"==typeof t&&(t=e.value.length),e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}else e.selectionStart&&(e.focus(),e.selectionStart=t,e.selectionEnd=t)},a=function(){var e;t&&t.call(this),this.queue=[],this.config={animateTime:250},this.openTimer=null,this.closeTimer=null,e=this.config,this.init=function(){},this.bind=function(t){var r={};return jQuery.extend(!0,r,e),t&&jQuery.extend(!0,r,t),t=r,t.target?(t.$target=jQuery(t.target),t.id||(t.id="ax5-formatter-"+ax5.getGuid()),-1===n.search(this.queue,function(){return this.id==t.id})&&(this.queue.push(t),this.__bindFormatterTarget(this.queue[this.queue.length-1],this.queue.length-1)),this):(console.log(ax5.info.getError("ax5formatter","401","bind")),this)},this.__bindFormatterTarget=function(){var e={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},t={48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1},a={money:function(n,r){var a={188:","};"int"==n.patternArgument||(a[190]="."),a=$.extend(a,e),n.enterableKeyCodes=$.extend(a,t)},number:function(n,r){var a={190:"."};a=$.extend(a,e),n.enterableKeyCodes=$.extend(a,t)},date:function(n,r){var a={189:"-",191:"/"};a=$.extend(a,e),n.enterableKeyCodes=$.extend(a,t)},time:function(n,r){var a={186:":"};a=$.extend(a,e),n.enterableKeyCodes=$.extend(a,t)},bizno:function(n,r){var a={189:"-"};a=$.extend(a,e),n.enterableKeyCodes=$.extend(a,t)},phone:function(n,r){var a={189:"-",188:","};a=$.extend(a,e),n.enterableKeyCodes=$.extend(a,t)},custom:function(n,r){var a={};a=$.extend(a,e),n.enterableKeyCodes=$.extend(a,t)}},u={money:function(e,t,r,a){var u,a=a.replace(/[^0-9^\.^\-]/g,""),i=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),s=a.split(".");s[0]+=".";do s[0]=s[0].replace(i,"$1,$2");while(i.test(s[0]));return u=s.length>1?n.isNumber(e.maxRound)?s[0]+n.left(s[1],e.maxRound):s.join(""):s[0].split(".")[0]},number:function(e,t,r,a){a=a.replace(/[^0-9^\.^\-]/g,"");var u,i=a.split(".");return u=i.length>1?n.isNumber(e.maxRound)?i[0]+n.left(i[1],e.maxRound):i.join(""):i[0].split(".")[0]},date:function(e,t,r,a){a=a.replace(/\D/g,"");var u=/^([12][0-9]{3})\-?([0-9]{1,2})?\-?([0-9]{1,2})?.*$/;"time"==e.patternArgument&&(u=/^([12][0-9]{3})\-?([0-9]{1,2})?\-?([0-9]{1,2})? ?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?.*$/);var i=a.match(u),s=a.replace(u,function(t,n){var r=[arguments[1]];return arguments[2]&&r.push("-"+arguments[2]),arguments[3]&&r.push("-"+arguments[3]),"time"==e.patternArgument&&(arguments[4]&&r.push(" "+arguments[4]),arguments[5]&&r.push(":"+arguments[5]),arguments[6]&&r.push(":"+arguments[6])),r.join("")});return i||(s=s.length>4?n.left(s,4):s),s},time:function(e,t,r,a){a=a.replace(/\D/g,"");var u=/^([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?.*$/,i=a.match(u),s=a.replace(u,function(e,t){var n=[arguments[1]];return arguments[2]&&n.push(":"+arguments[2]),arguments[3]&&n.push(":"+arguments[3]),n.join("")});return i||(s=s.length>2?n.left(s,2):s),s},bizno:function(e,t,n,r){r=r.replace(/\D/g,"");var a=/^([0-9]{3})\-?([0-9]{1,2})?\-?([0-9]{1,5})?.*$/,u=r.replace(a,function(e,t){var n=[arguments[1]];return arguments[2]&&n.push(arguments[2]),arguments[3]&&n.push(arguments[3]),n.join("-")});return u},phone:function(e,t,n,r){r=r.replace(/\D/g,"");var a=/^([0-9]{3})\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?/,u=r.replace(a,function(e,t){var n=[arguments[1]];return arguments[2]&&n.push(arguments[2]),arguments[3]&&n.push(arguments[3]),arguments[4]&&n.push(arguments[4]),arguments[5]&&n.push(arguments[5]),n.join("-")});return u},custom:function(e,t,n,r){}},i={keydown:function(e,t,n){var r=!1;n.which&&e.enterableKeyCodes[n.which]?e.$input.data("__prevValue__",e.$input.val()):n.metaKey||n.ctrlKey||n.shiftKey||(r=!0),r&&ax5.util.stopEvent(n)},keyup:function(e,t,n){var a,i,s,o,c=e.$input.get(0);"selectionStart"in c?a=c.selectionStart:document.selection&&(s=document.selection.createRange(),o=document.selection.createRange().text.length,s.moveStart("character",-c.value.length),a=s.text.length-o),i=c.value,u[e.pattern]&&e.$input.data("__prevValue__")!=c.value&&(c.value=u[e.pattern].call(this,e,t,n,c.value),r(c,a+c.value.length-i.length))}};return function(e,t){if(!e.pattern&&("INPUT"==e.$target.get(0).tagName?e.pattern=e.$target.attr("data-ax5formatter"):e.pattern=e.$target.find('input[type="text"]').attr("data-ax5formatter"),!e.pattern))return console.log(ax5.info.getError("ax5formatter","501","bind")),console.log(e.target),this;var n=/[^\(^\))]+/gi,r=e.pattern.match(n);e.pattern=r[0],e.patternArgument=r[1]||"";for(var u in a)if(e.pattern==u){a[u].call(this,e,t);break}return e.$input="INPUT"==e.$target.get(0).tagName?e.$target:e.$target.find('input[type="text"]'),e.$input.unbind("keydown.ax5formatter").bind("keydown.ax5formatter",i.keydown.bind(this,this.queue[t],t)),e.$input.unbind("keyup.ax5formatter").bind("keyup.ax5formatter",i.keyup.bind(this,this.queue[t],t)),this}}(),this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};e.formatter=function(){return n.isFunction(t)&&(a.prototype=new t),a}()}(ax5.ui,ax5.ui.root),ax5.ui.formatter_instance=new ax5.ui.formatter,$.fn.ax5formatter=function(){return function(e){return"undefined"==typeof e&&(e={}),$.each(this,function(){var t={target:this};e=$.extend(!0,e,t),ax5.ui.formatter_instance.bind(e)}),this}}();