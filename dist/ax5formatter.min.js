"use strict";!function(t,e){var n=ax5.util,i=function(){var t;e&&e.call(this),this.queue=[],this.config={animateTime:250},this.openTimer=null,this.closeTimer=null,t=this.config,this.init=function(){},this.bind=function(e){var i={};return jQuery.extend(!0,i,t),e&&jQuery.extend(!0,i,e),e=i,e.target?(e.$target=jQuery(e.target),e.id||(e.id="ax5-formatter-"+ax5.getGuid()),-1===n.search(this.queue,function(){return this.id==e.id})&&(this.queue.push(e),this.__bindFormatterTarget(e,this.queue.length-1)),this):(console.log(ax5.info.getError("ax5formatter","401","bind")),this)},this.__bindFormatterTarget=function(){var t={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",190:"KEY_PERIOD",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},e={48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1},n={money:function(n,i){var r={188:",",190:"."};r=$.extend(r,t),n.enterableKeyCodes=$.extend(r,e)},number:function(n,i){var r={190:"."};r=$.extend(r,t),n.enterableKeyCodes=$.extend(r,e)},date:function(n,i){var r={189:"-",191:"/"};r=$.extend(r,t),n.enterableKeyCodes=$.extend(r,e)},time:function(n,i){var r={186:":"};r=$.extend(r,t),n.enterableKeyCodes=$.extend(r,e)},bizno:function(n,i){var r={189:"-"};r=$.extend(r,t),n.enterableKeyCodes=$.extend(r,e)},phone:function(n,i){var r={189:"-",188:","};r=$.extend(r,t),n.enterableKeyCodes=$.extend(r,e)},custom:function(n,i){var r={};r=$.extend(r,t),n.enterableKeyCodes=$.extend(r,e)}},i=function(t){return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,!1},r={money:function(t,e,n,i){var r,a=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),o=i.split(".");o[0]+=".";do o[0]=o[0].replace(a,"$1,$2");while(a.test(o[0]));return r=o.length>1?o.join(""):o[0].split(".")[0]},number:function(t,e){},date:function(t,e){},time:function(t,e){},bizno:function(t,e){},phone:function(t,e){},custom:function(t,e){}},a={keydown:function(t,e,n){var r=!1;n.which&&t.enterableKeyCodes[n.which]||(console.log(n.which,t.enterableKeyCodes),r=!0),r&&i(n)},keyup:function(t,e,n){var i,a=t.$input.get(0);if("selectionStart"in a)i=a.selectionStart;else if(document.selection){var o=document.selection.createRange(),u=document.selection.createRange().text.length;o.moveStart("character",-a.value.length),i=o.text.length-u}t.$input.data("focusPosition",i),t.$input.data("prevLen",a.value.length),a.value=r[t.pattern].call(this,t,e,n,a.value)}};return function(t,e){if(!t.pattern&&("INPUT"==t.$target.get(0).tagName?t.pattern=t.$target.attr("data-ax5formatter"):t.pattern=t.$target.find('input[type="text"]').attr("data-ax5formatter"),!t.pattern))return console.log(ax5.info.getError("ax5formatter","501","bind")),console.log(t.target),this;for(var i in n)if(t.pattern==i){n[i].call(this,t,e);break}return t.$input=t.$target.find('input[type="text"]'),t.$input.unbind("keydown.ax5formatter").bind("keydown.ax5formatter",a.keydown.bind(this,this.queue[e],e)),t.$input.unbind("keyup.ax5formatter").bind("keyup.ax5formatter",a.keyup.bind(this,this.queue[e],e)),this}}(),this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};t.formatter=function(){return n.isFunction(e)&&(i.prototype=new e),i}()}(ax5.ui,ax5.ui.root),ax5.ui.formatter_instance=new ax5.ui.formatter,$.fn.ax5formatter=function(){return function(t){return"undefined"==typeof t&&(t={}),$.each(this,function(){var e={target:this};t=$.extend(!0,e,t),ax5.ui.formatter_instance.bind(t)}),this}}();